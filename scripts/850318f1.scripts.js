"use strict";var CCHBBClient={jsonAppend:".json",baseURL:"https://cch-bobs-bagels-api.herokuapp.com/",cart:{orders:[]},menu:{},stripeResponseHandler:function(a,b){var c=$("#payment-form");if(b.error)c.find(".payment-errors").text(b.error.message),c.find("button").prop("disabled",!1);else{for(var d=b.id,e=b.card.name,f=b.card.address_line1,g=b.card.address_city,h=b.card.address_state,i=b.card.address_zip,j=0,k=0,l=CCHBBClient.cart.orders.length;l>k;k++)j+=parseFloat(CCHBBClient.cart.orders[k].price);for(var k=0,l=CCHBBClient.cart.orders.length;l>k;k++){var m=CCHBBClient.cart.orders[k].name,n=CCHBBClient.cart.orders[k].price;c.append($('<input type="hidden" name="order_item_attributes[name]" />').val(m)),c.append($('<input type="hidden" name="order_item_attributes[price]" />').val(n))}c.append($('<input type="hidden" name="order[access_token]" />').val(d)),c.append($('<input type="hidden" name="order[name]" />').val(e)),c.append($('<input type="hidden" name="order[street]" />').val(f)),c.append($('<input type="hidden" name="order[city]" />').val(g)),c.append($('<input type="hidden" name="order[state]" />').val(h)),c.append($('<input type="hidden" name="order[zipcode]" />').val(i)),c.append($('<input type="hidden" name="order[price]" />').val(j)),c.get(0).submit()}}};CCHBBClient.renderPgNav=function(){{var a=Handlebars.getTemplate("nav_pgs");a({})}},CCHBBClient.renderCart=function(a,b){CCHBBClient.cart.orders.push({name:a,price:b})},CCHBBClient.addEvents=function(){$("#content").on("click",".menu-item",function(a){a.preventDefault();var b=$(this).html(),c=$(this).next().html();CCHBBClient.renderCart(b,c),CCHBBClient.router.menu()}),$("#content").on("click",".js-delete-item",function(a){a.preventDefault();var b=$(this).next().html(),c=CCHBBClient.cart.orders.filter(function(a){return a.name!==b});CCHBBClient.cart.orders=c,CCHBBClient.router.cart()}),$("#content").on("click",".js-delete-item-cart",function(a){a.preventDefault();var b=$(this).next().html(),c=CCHBBClient.cart.orders.filter(function(a){return a.name!==b});CCHBBClient.cart.orders=c,CCHBBClient.router.menu()}),$("#content").on("click",'input[value="Place Order"]',function(){CCHBBClient.router.checkout()})};var Router=Backbone.Router.extend({routes:{"":"home",home:"home",menu:"menu",about:"about",contact:"contact",checkout:"checkout",cart:"cart",confirmation:"confirmation"},home:function(){var a=Handlebars.templates.home;$("#content").html(a({}))},menu:function(){var a=Handlebars.compile($("#menu-temp").html());$("#content").html(a({})),$.ajax({url:CCHBBClient.baseURL+"menus"+CCHBBClient.jsonAppend,type:"GET",dataType:"json"}).done(function(b){$("#content").html(a({menu:b.menus,order_items:CCHBBClient.cart.orders}))})},about:function(){var a=Handlebars.templates.about;$("#content").html(a({}))},contact:function(){var a=Handlebars.compile($("#contact-temp").html());$("#content").html(a({}))},checkout:function(){for(var a=Handlebars.compile($("#checkout-temp").html()),b=0,c=0,d=CCHBBClient.cart.orders.length;d>c;c++)b+=parseFloat(CCHBBClient.cart.orders[c].price);$("#content").html(a({order_items:CCHBBClient.cart.orders,total_price:b}))},cart:function(){var a=Handlebars.compile($("#cart-temp").html());$("#content").html(a({order_items:CCHBBClient.cart.orders}))},confirmation:function(){var a=Handlebars.compile($("#conf-temp").html());$("#content").html(a({}))}});$(function(){CCHBBClient.router=new Router,Backbone.history.start(),CCHBBClient.addEvents(),$("#content").on("click","#checkout-button",function(){var a=$("#payment-form");return a.find("button").prop("disabled",!0),Stripe.card.createToken(a,CCHBBClient.stripeResponseHandler),!1})}),function(){var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{};b.about=a({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="about">\n  <img src="styles/images/bob.jpg">\n  <h1>About</h1>\n  <p>Robert Bob Bagler was born in Boston in 1951; after years of working in his father`s restaurant, Arthur`s, he struck out on his own in 1979 and started Bob`s Bagels right where it sits today, at XYZ Ave in Boston. For the last forty years, Bob`s Bagels has strived to proved the best bagels in town, at the best prices, made with love from only the freshest ingredients. Bob still works the counter, just like the old days, so stop in sometime and say hello!</p>\n</div>\n'},useData:!0}),b.home=a({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div id="myCarousel" class="carousel slide" data-ride="carousel">\n  <!-- Indicators -->\n  <ol class="carousel-indicators">\n    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>\n  </ol>\n  <div class="carousel-inner">\n    <div class="item active">\n    <img class="carousel-img" src="styles/images/main_bg.jpg">\n      <div class="container">\n        <div class="carousel-caption">\n          <h1>Welcome to Bob\'s Bagels!</h1>\n          <p>BEST BAGELS. BEST PRICES. FRESHEST INGREDIENTS. ALL MADE WITH LOVE.</p>\n        </div>\n      </div>\n    </div>\n\n\n'},useData:!0})}();